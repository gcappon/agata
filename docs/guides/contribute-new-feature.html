<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Contributing to AGATA: Developing new features | AGATA</title>
    <meta name="generator" content="VuePress 1.7.1">
    <link rel="icon" href="/agata/agata-logo.png">
    <meta name="description" content="AGATA (Automated Glucose dATa Analysis) is a MATLAB® toolbox to analyse glucose data.">
    <meta name="theme-color" content="#56772c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    
    <link rel="preload" href="/agata/assets/css/0.styles.9ee7eaad.css" as="style"><link rel="preload" href="/agata/assets/js/app.6266f3c5.js" as="script"><link rel="preload" href="/agata/assets/js/2.0742f862.js" as="script"><link rel="preload" href="/agata/assets/js/7.7c83ecc5.js" as="script"><link rel="prefetch" href="/agata/assets/js/10.27ddccc2.js"><link rel="prefetch" href="/agata/assets/js/11.944cd645.js"><link rel="prefetch" href="/agata/assets/js/12.714d7225.js"><link rel="prefetch" href="/agata/assets/js/13.4b3b54b2.js"><link rel="prefetch" href="/agata/assets/js/14.2d0835f0.js"><link rel="prefetch" href="/agata/assets/js/15.0f82c0da.js"><link rel="prefetch" href="/agata/assets/js/16.3479b963.js"><link rel="prefetch" href="/agata/assets/js/17.84a6a65b.js"><link rel="prefetch" href="/agata/assets/js/18.bd82fb75.js"><link rel="prefetch" href="/agata/assets/js/19.7d3ce899.js"><link rel="prefetch" href="/agata/assets/js/20.35b1a0e8.js"><link rel="prefetch" href="/agata/assets/js/21.964457b0.js"><link rel="prefetch" href="/agata/assets/js/22.e98f7ebe.js"><link rel="prefetch" href="/agata/assets/js/23.3ac7ba05.js"><link rel="prefetch" href="/agata/assets/js/24.5e0eea95.js"><link rel="prefetch" href="/agata/assets/js/25.179a204f.js"><link rel="prefetch" href="/agata/assets/js/3.95e38d4c.js"><link rel="prefetch" href="/agata/assets/js/4.671b31d1.js"><link rel="prefetch" href="/agata/assets/js/5.24edc35a.js"><link rel="prefetch" href="/agata/assets/js/6.90a809a7.js"><link rel="prefetch" href="/agata/assets/js/8.33892b5b.js"><link rel="prefetch" href="/agata/assets/js/9.ad24813b.js">
    <link rel="stylesheet" href="/agata/assets/css/0.styles.9ee7eaad.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/agata/" class="home-link router-link-active"><!----> <span class="site-name">AGATA</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/agata/guides/" class="nav-link router-link-active">
  Guides
</a></div><div class="nav-item"><a href="/agata/api/" class="nav-link">
  API Docs
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/agata/guides/" class="nav-link router-link-active">
  Guides
</a></div><div class="nav-item"><a href="/agata/api/" class="nav-link">
  API Docs
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Guides</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/agata/guides/getstarted.html" class="sidebar-link">Getting started</a></li><li><a href="/agata/guides/contribute-guide.html" class="sidebar-link">Contributing to AGATA: A step-by-step guide</a></li><li><a href="/agata/guides/contribute-new-feature.html" aria-current="page" class="active sidebar-link">Contributing to AGATA: Developing new features</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/agata/guides/contribute-new-feature.html#step-1-this-is-the-issue-you-were-looking-for" class="sidebar-link">Step 1. This is the issue you were looking for</a></li><li class="sidebar-sub-header"><a href="/agata/guides/contribute-new-feature.html#step-2-code-the-required-stuff" class="sidebar-link">Step 2. Code the required stuff</a></li><li class="sidebar-sub-header"><a href="/agata/guides/contribute-new-feature.html#step-3-put-your-code-in-the-right-place" class="sidebar-link">Step 3. Put your code in the right place</a></li><li class="sidebar-sub-header"><a href="/agata/guides/contribute-new-feature.html#step-4-push-and-make-a-pull-request" class="sidebar-link">Step 4: Push and make a pull request</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="contributing-to-agata-developing-new-features"><a href="#contributing-to-agata-developing-new-features" class="header-anchor">#</a> Contributing to AGATA: Developing new features</h1> <p>This guide is intended to describe the steps to follow when you want to contribute to AGATA by solving opened issues that involves developing new AGATA features, a.k.a new functions.</p> <h2 id="step-1-this-is-the-issue-you-were-looking-for"><a href="#step-1-this-is-the-issue-you-were-looking-for" class="header-anchor">#</a> Step 1. This is the issue you were looking for</h2> <p>Firstly, you have to find the issue that is made for you. Simply go to the AGATA <em>issues</em> section in Github and choose between one of the available issues labeled as <img src="data:image/png;base64,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" alt="enhancement">. <br></p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>If you are new to the concept of contributing to an open source repository, try to start from the issues labeled also as <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAAAeCAYAAADaW7vzAAAABHNCSVQICAgIfAhkiAAAABl0RVh0U29mdHdhcmUAZ25vbWUtc2NyZWVuc2hvdO8Dvz4AAAbJSURBVGiB7ZptcFTVGcd/59zdmBdekmBASKPZTCChxJhQK2VAqgyVl0lniqZIP1iCtdgSVIq0U5zRFqjUFmnHF4gjnZESmDotKhVagSGlpLEUnDSRJpiQ4BKSlUkC7iJ533vv6Ye72U3MvhCH4rbd35edc557nnP2+d/znLPPrOjpG1DEiBrk572AGMOJCRJlxASJMmyRHmisgdYmk4tOwcUPocsjbsS6/qcYm6KYnAWTHfCFbEFOYehnRahD/eN2eGOHorUhJsD1JiNX8cBqQeqkkbagglQfU7yzSzDQdyOW9/9JXDwsWamYec/wF36EIKeOKg7ujO2KG0XRdxV3LQjEe9ihfrkdjpTHxLiRHCkXXG4PtP2CKAVv7lCfW5qS+bBhp43suJG2gh9KNv3ezsMLBHc+q1G6eHSXw6mLBelB+tNWCJ59SsP+2ZZ8XRjog7d2KJQvT/lvWW3novQAj4OcGZKaZ3TealDYqg0au0c3/iv3a9RX6LgGhps69ymew8B7XRc8ei40CNrOKTKyxRBBmiOLkfuIZOm9EuGGxr+aOBZK9pfqNAMFqyWLC6w313AqDrxo8IEb1CQoelxjZrrl/8pJkz1lJh8DOd+XLJsrMdxwrtYMOufdP9G4I1lgPKkRX27QtFAyq0pR5jL58SobZzoVdyYJdmzUyV6v8VWHNU+/U/Hm8wY3P6UxPU3g2G5j7Cad460B32nFgrXpkp9uMUiYJ3joIY1UOwgvNJUb/K5SMS5E/6xfatxxxOTVo9arPbQ9aYGg+EFrjNmhOPKSwXutwb5dgLZmQUb2kJTVejZ8SUvmw9K5kop1OlvW6XQUCib4bGMXCYpvk/yhVOfnJTp/8ioeXGGlgrzvSAo74YUSnc2lOudnCIoXCGQ+3D9LcnidzpY1OnUTYVyQef+20eB9j+LkJisQfgbAnChIfddk4490OuYJ7ouD7SU6m1fp/LlDkZcrOPGiQVu34mDpcDGGouLgnmUS9ysGm0t0nntJJ26WJD1Uf5g4mVmwfKVGyzZrzM5TJku+p5EaNrqB+PsFaTsbfkDyNEGyU/GvdisY/zhsovtsWYUCT61Jsy+VnDlmYmYL0pMgb5qk8S8mnwB0Q029YkqhZMI0QbLL5883pjfCoj+N16uorVR4AcOj6E8XzJ4nSAHqykz2V19b3VQMgLsHMu6W5GaBOg2/3WrgCtUfxtf4PMGU84rKBmvujgrFR5mC6Unh1zAYf3/K8kZIpPHJAr0HvwiGR9EzaEsS9HYEvrzoBu8YSAASEuFSV8DP1R5FwkRh+esO+BPdjDqXix78IqoT8FqSwfylkh+skXhqTd5+waDpGn39fZuB/Lak6Bkb473wfrnBvkoVsj8U8Skgp0qe2BU4AuwInKlAmLNvMP5+QW7JhHO1oQf0eBW2ROvQ8QJasiDRZ+vrViRMDDyrkiCxywpWbw8kjAnYxiYKenugz6OwpQf8mUP8fVbajip2HzUgxeBrGzS+USzZeij42fRpjHY4vtXkOCYT5glWPaoxs1rnnyH6hRfsdgFY4th9V7WrbjDrTZ7faIxqx9+SaX3KQEf47X2lTtHlEExPwbq5LJR+NT88pUgukGT6tmX+vZL+ZoWrG+rOmuTMl9b5kAR3zZRcOGlyyanwTBPcPsny9+W5InJhLQxTVghWPyJJAHBDS6dCs1vpSNkhIUzKUCmw/NcaczKstsepuAJoycH7bcDVbsWYdLADWhbc7ru09NYoWhyCOVlWOykfStZKglRJhjEYf38MJjvC37JUNRyoN/n6yzYWdUD9uyafLLTGXK1Q7Msx+dZ2y53hVLy+07pO1peZZK7XeGKXZbtcZfJ6pUIBB6pMlv7KxqIeaKwyueyIsOowuA4pXE9K1u+1gRf6XYq3f2OAG+rOK4petpP2C539p0e+eMINVcdMlm+2MR/rNuXcY1DrgotB+mu6wThoMucxG2tnSLo+UlxoUmTaBaJV8cYeg+INGrPtILrg9F6D9hGzDmcw/v7SyUA/vPq0oqPl2n6LiC/B0ytt7F6jc34UgYsxkrRbFY/+TBB305CUFXcTLFsj0ELkDZUBq/faKPJtxanzJbJFhb1xxIiMZoPlj1tiQJDi4olD8M5rwQffViz4ZpHGOLug32Xyx20GdZH2YoywLF4JsxcF2kHL7+9VKA7vjpXf/5PEJ8GShxUFcyOU3wdxX4L9ZQpnXRTWt/7LceQpHnhMMC55pC2kIINcuggtDQrnB3DhDHg6YwKNlvE3K279IjimgyNXMGFK6GcjChLjxhL710mUERMkyogJEmXEBIkyYoJEGf8GBVDQx2LyGroAAAAASUVORK5CYII=" alt="good first issue">.</p></div> <p>Once you decided, just comment the issue saying that you will get into solving the issue ASAP, and finally propose a due date.</p> <h2 id="step-2-code-the-required-stuff"><a href="#step-2-code-the-required-stuff" class="header-anchor">#</a> Step 2. Code the required stuff</h2> <p>Once your development environment is set (see <a href="/agata/guides/contribute-guide.html">Contributing to AGATA: A step-by-step guide</a> for details on this), when you are developing a new AGATA functionality, as such a new function, you are required of producing specific <code>*.m</code> files.</p> <p>Lets assume you want to add a new function that compute the mean glucose concentration of a given glucose trace, and you decided to call it <code>meanGlucose.m</code>. You are required to produce <strong>two</strong> files:</p> <ol><li>The <code>*.m</code> function that implements the functionality to develop, i.e., <code>meanGlucose.m</code>;</li> <li>The <code>*Test.m</code> script that tests <code>meanGlucose.m</code>, i.e., <code>meanGlucoseTest.m</code>.</li></ol> <h3 id="_1-m-function-requirements"><a href="#_1-m-function-requirements" class="header-anchor">#</a> 1. <code>*.m</code> function requirements</h3> <p>The <code>*.m</code> function must implement the following concepts:</p> <ul><li><strong>AGATA ❤️ timetables</strong>: if your function need to be fed with, use, manipulate, ..., timeseries such as glucose data, you are required to use MATLAB timetables to deal with them (see <a href="https://it.mathworks.com/help/matlab/timetables.html" target="_blank" rel="noopener noreferrer">https://it.mathworks.com/help/matlab/timetables.html<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> for more details on the timetable format);</li> <li><strong>NaN robust</strong>: your fuction will, in general, deal with real data. As you know, real data are present missing values (represented in MATLAB as <code>NaN</code> values). Your function must be robust to <code>Nan</code> values and should properly manage their presence;</li> <li><strong>Documentation friendly</strong>: your function must begin with a comment section briefly stating the function scope, its inputs, and its outputs;</li> <li><strong>Bibliographic reference is the essence</strong>: if your function involves the computation of state-of-the-art formulae, algorithms, and so on and so forth, you need to specify in the function documentation some bibliography that reference such a thing.</li> <li><strong>Check for preconditions</strong>: before running its code, your function needs to check if the preconditions are fulfilled. If not, the function should launch an error.
Common preconditions are: i) an input glucose timeseries present an homogeneous time grid, ii) all required inputs must be provided to the function, iii) correct variable type and so on and so forth.</li></ul> <p>Here's a possible implementation of <code>meanGlucose.m</code></p> <div class="language-MATLAB extra-class"><pre class="language-matlab"><code><span class="token keyword">function</span> meanGlucose <span class="token operator">=</span> <span class="token function">meanGlucose</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>
<span class="token comment">%meanGlucose function that computes the mean glucose concentration</span>
<span class="token comment">%(ignores nan values).</span>
%
<span class="token comment">%Input:</span>
<span class="token comment">%   - data: a timetable with column `Time` and `glucose` containing the </span>
<span class="token comment">%   glucose data to analyze (in mg/dl). </span>
<span class="token comment">%Output:</span>
<span class="token comment">%   - meanGlucose: mean glucose concentration.</span>
%
<span class="token comment">%Preconditions:</span>
<span class="token comment">%   - data must be a timetable having an homogeneous time grid.</span>
%
<span class="token comment">% ---------------------------------------------------------------------</span>
%
<span class="token comment">% Copyright (C) 2020 Giacomo Cappon</span>
%
<span class="token comment">% This file is part of AGATA.</span>
%
<span class="token comment">% ---------------------------------------------------------------------</span>
    
    <span class="token comment">%Check preconditions </span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">~</span><span class="token function">istimetable</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token function">error</span><span class="token punctuation">(</span><span class="token string">'meanGlucose: data must be a timetable.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">end</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">var</span><span class="token punctuation">(</span><span class="token function">seconds</span><span class="token punctuation">(</span><span class="token function">diff</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span>Time<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span>
        <span class="token function">error</span><span class="token punctuation">(</span><span class="token string">'meanGlucose: data must have a homogeneous time grid.'</span><span class="token punctuation">)</span>
    <span class="token keyword">end</span>
    
    <span class="token comment">%Remove nan values from calculation</span>
    nonNanGlucose <span class="token operator">=</span> data<span class="token punctuation">.</span><span class="token function">glucose</span><span class="token punctuation">(</span><span class="token operator">~</span><span class="token function">isnan</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span>glucose<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token comment">%Compute mean</span>
    meanGlucose <span class="token operator">=</span> <span class="token function">mean</span><span class="token punctuation">(</span>nonNanGlucose<span class="token punctuation">)</span><span class="token punctuation">;</span>
    
<span class="token keyword">end</span>
</code></pre></div><p>Note that here we are computing just the mean so there is no need to add a bibliographic reference to this function.</p> <h3 id="_2-test-m-script-requirements"><a href="#_2-test-m-script-requirements" class="header-anchor">#</a> 2. <code>*Test.m</code> script requirements</h3> <p>AGATA implements <a href="https://travis-ci.org/" target="_blank" rel="noopener noreferrer">Travis CI<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> to fast test its code and provide user with robust and (hopefully) bug-free code.</p> <p>As such, you are required to write also a proper script to unit test you <code>*.m</code> function.</p> <p>To do so, you have to write a MATLAB script that has the same name as the <code>*.m</code> function followed by the <code>Test</code> suffix, i.e., <code>*Test.m</code>.</p> <p>In our example, you are required to write a <code>*Test.m</code> script for your newly developed <code>meanGlucose.m</code>, thus called <code>meanGlucoseTest.m</code>.</p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>Try to write a unit test that covers most of the possible input scenarios that your new function is supposed to encounter.</p></div> <p>A possible implementation of <code>meanGlucoseTest.m</code> follows</p> <div class="language-MATLAB extra-class"><pre class="language-matlab"><code><span class="token comment">% Test units of the meanGlucose function</span>
%
<span class="token comment">% ---------------------------------------------------------------------</span>
%
<span class="token comment">% Copyright (C) 2020 Giacomo Cappon</span>
%
<span class="token comment">% This file is part of AGATA.</span>
%
<span class="token comment">% ---------------------------------------------------------------------</span>

time <span class="token operator">=</span> <span class="token function">datetime</span><span class="token punctuation">(</span><span class="token number">2000</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token function">minutes</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token function">datetime</span><span class="token punctuation">(</span><span class="token number">2000</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token function">minutes</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">% length = 11;</span>
data <span class="token operator">=</span> <span class="token function">timetable</span><span class="token punctuation">(</span><span class="token function">zeros</span><span class="token punctuation">(</span><span class="token function">length</span><span class="token punctuation">(</span>time<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">'VariableNames'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token string">'glucose'</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">'RowTimes'</span><span class="token punctuation">,</span> time<span class="token punctuation">)</span><span class="token punctuation">;</span>
data<span class="token punctuation">.</span><span class="token function">glucose</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">40</span><span class="token punctuation">;</span>
data<span class="token punctuation">.</span><span class="token function">glucose</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token operator">:</span><span class="token number">3</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">50</span><span class="token punctuation">;</span>
data<span class="token punctuation">.</span><span class="token function">glucose</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">80</span><span class="token punctuation">;</span>
data<span class="token punctuation">.</span><span class="token function">glucose</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token operator">:</span><span class="token number">6</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">120</span><span class="token punctuation">;</span>
data<span class="token punctuation">.</span><span class="token function">glucose</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token operator">:</span><span class="token number">8</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">200</span><span class="token punctuation">;</span>
data<span class="token punctuation">.</span><span class="token function">glucose</span><span class="token punctuation">(</span><span class="token number">9</span><span class="token operator">:</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">260</span><span class="token punctuation">;</span>
data<span class="token punctuation">.</span><span class="token function">glucose</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span> <span class="token operator">=</span> nan<span class="token punctuation">;</span>

<span class="token comment">%% Test 1: check NaN presence</span>
results <span class="token operator">=</span> <span class="token function">meanGlucose</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">assert</span><span class="token punctuation">(</span><span class="token operator">~</span><span class="token function">isnan</span><span class="token punctuation">(</span>results<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">%% Test 2: check results calculation</span>
results <span class="token operator">=</span> <span class="token function">meanGlucose</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">assert</span><span class="token punctuation">(</span>results <span class="token operator">==</span> <span class="token number">138</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>Remember to add to the working directory <em>PATH</em> of <code>*Test.m</code> the <code>*.m</code> function. Otherwise, it will generate an error during its execution.</p></div> <p>For more details on how to write and run script-based unit tests in MATLAB see <a href="https://it.mathworks.com/help/matlab/script-based-unit-tests.html" target="_blank" rel="noopener noreferrer">https://it.mathworks.com/help/matlab/script-based-unit-tests.html<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <h2 id="step-3-put-your-code-in-the-right-place"><a href="#step-3-put-your-code-in-the-right-place" class="header-anchor">#</a> Step 3. Put your code in the right place</h2> <p>Once you debugged the two files, it is time to put them in the right place within AGATA.</p> <p>AGATA is structured as follows:</p> <div class="language- extra-class"><pre class="language-text"><code>├─ .
├─ docs
├─ src
│  ├─ subfolder1
│  ├─ subfolder2
│  └─ ...
└─ test
   ├─ subfolder1
   ├─ subfolder2
   └─ ...
</code></pre></div><p>You have to put your <code>.m</code> function in a subfolder of the <code>src</code> folder and your <code>*Test.m</code> script in the subfolder of the <code>test</code> folder that has the same name of the subfolder of <code>src</code> you chose (sorry for the wording).</p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>Choose the subfolder that relates the most with your new function scope. If none of the already existent subfolders match your ideal choice, just create a new one.</p></div> <h2 id="step-4-push-and-make-a-pull-request"><a href="#step-4-push-and-make-a-pull-request" class="header-anchor">#</a> Step 4: Push and make a pull request</h2> <p>That's all. Push your modifications and make a pull request (see <a href="/agata/guides/contribute-guide.html">Contributing to AGATA: A step-by-step guide</a> for details on this).</p> <p>Thanks for helping improving AGATA!</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/agata/guides/contribute-guide.html" class="prev">
        Contributing to AGATA: A step-by-step guide
      </a></span> <!----></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/agata/assets/js/app.6266f3c5.js" defer></script><script src="/agata/assets/js/2.0742f862.js" defer></script><script src="/agata/assets/js/7.7c83ecc5.js" defer></script>
  </body>
</html>
